@using appSchool.Repositories
@model modelTeacherPhotoUploadInfo


@{
    Html.EnableUnobtrusiveJavaScript(true);
    Html.EnableClientValidation(true);
}


<script type="text/javascript">
    function OnClick(s, e) {
        uc.Upload();
    }
    function OnFileUploadComplete(s, e) {
        if (e.callbackData !== "") {
            alert(e.callbackData);
        }
        else {
            alert("The selected file was not uploaded.");
        }
    }

    function RefreshTeacherPhoto(s, e) {
        var regID;
        regID = TeacherIDPhoto.GetText();



        $.ajax({
            url: "/TeacherRegistration/EditUpLoadPhotobyClick",
            type: "POST",
            data: { mTeacherID: regID },
            success: function (ResultData) {
                alert('Photo Upload Successfully ');
                $("#divpopupteacherupdate").html(ResultData.ResultData);
               

            },
            error: function () {
            }
        });
        //$("#BodySplitter_1_CC").html("<h1>"+values+"</h1>");
        //alert(values);
    }

    function UpdateSuccessfull(data) {

        //alert(data.Resultmsg);
        //  $("#RegistrationSplitter_3_CC").html(data.ResultData);
        var mTeacherIDs = TeacherIDs.GetText();
        if (mTeacherIDs.toString() == "") {
            alert("Please Select Teachers");
            return;

        }

        $.ajax({
            url: "/TeacherRegistration/UpdatePhotodetailbyClick",
            type: "POST",
            data: { mTeacherID: mTeacherIDs },
            datatype: "json",
            beforeSend: (function (data) {
                //  loadingPanelStudentRegistration.Show();
            }),
            success: function (data) {
                $("#divpopupteacherupdate").html(data.ResultData);
                //var winHeight = document.getElementById('RegistrationSplitter_1_CC').offsetHeight;
                //GridStudents.SetHeight(winHeight - 10);
            },
            error: function () {
            }
        }).done(function (data) {
            // loadingPanelStudentRegistration.Hide();
        });

    }


</script>







<div style=" position: center">

    @using (Ajax.BeginForm("UploadControlCallbackAction", "TeacherRegistration",
        new AjaxOptions
        {
            HttpMethod = "POST",
            OnBegin = "loadingPanelTeacherInfo.Show();",
            OnComplete = "loadingPanelTeacherInfo.Hide();",
            UpdateTargetId = "contentPersonal1",
            InsertionMode = InsertionMode.Replace,
            OnSuccess = "UpdateSuccessfull(data)"
        },
        new
        {
            //id = "validationForm1",
            id = "profilePictureForm",
            @class = "edit_form",
            style = "height: 200px; position:relative; width: 100%;",
            enctype = "multipart/form-data"
        }
        ))
    {
        <div id="contentPersonal1" class="edit_form">
            @Html.Partial("UploadPhotoEditPartial", Model)
        </div>
    }
</div>

@Html.DevExpress().LoadingPanel(
    settings =>
    {
        settings.Name = "loadingPanelPhoto";
        settings.Modal = true;
        settings.ContainerElementID = "validationForm1";
        settings.Styles.LoadingDiv.BackColor = System.Drawing.Color.White;
    }).GetHtml()


