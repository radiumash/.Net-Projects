@using appSchool.ViewModels
@using appSchool.Model
@using appSchool.Repositories

@model modelStudentFeesReceipt


@{
    ViewBag.Title = "Fees Pay";
    Layout = "~/Views/Shared/_Layout.cshtml";
}

@section Head {
    <link rel="stylesheet" type="text/css" href="@Url.Content("~/Content/GridView.css")" />
    <link rel="stylesheet" type="text/css" href="@Url.Content("~/Content/bootstrap.css")" />
    <script type="text/javascript" src="@Url.Content("~/Content/GridView.js")"></script>
    <script type="text/javascript" src="@Url.Content("~/jsControllers/feesTransactionController.js")"></script>

}

@section PageToolbar {
 

@Html.DevExpress().Menu(menuSettings =>
{
    menuSettings.Name = "pageToolbar";

    menuSettings.ItemAutoWidth = false;
    menuSettings.AllowSelectItem = false;
    menuSettings.ApplyItemStyleToTemplates = true;

    menuSettings.SettingsAdaptivity.Enabled = true;
    menuSettings.SettingsAdaptivity.EnableAutoHideRootItems = true;
    menuSettings.SettingsAdaptivity.EnableCollapseRootItemsToIcons = true;
    menuSettings.SettingsAdaptivity.CollapseRootItemsToIconsAtWindowInnerWidth = 600;

    menuSettings.Width = Unit.Percentage(100);
    menuSettings.ControlStyle.SeparatorWidth = Unit.Pixel(0);
    menuSettings.ControlStyle.CssClass = "page-toolbar";

    menuSettings.Styles.Item.CssClass = "item";
    menuSettings.Styles.Item.VerticalAlign = VerticalAlign.Middle;

    menuSettings.Images.Item.Width = Unit.Pixel(16);
    menuSettings.Images.Item.Height = Unit.Pixel(16);

    menuSettings.Items.Add(item =>
    {
        item.Enabled = false;
        item.SetTemplateContent(template => ViewContext.Writer.Write("<h1> Fees Pay </h1>"));
    });
    


}).GetHtml()

    
}


@section LeftPanelContent {

    @{Html.RenderAction("ReturnLeftPanelView", "LeftAndRightPanel", new { moduleid = (int)appModule.appFeesManager });}


}

@section RightPanelContent {
    @{Html.RenderAction("ReturnRightPanelView", "LeftAndRightPanel");}

}


<div class="row" style="margin-right:0">

    <div class="col-sm-12">

    @Html.DevExpress().PopupControl(settings =>
{
    settings.Name = "PopupControlChangeFeesStructure";
    settings.AllowResize = true;
    settings.ShowHeader = true;
    settings.ShowFooter = true;
    settings.AllowDragging = true;
    settings.ShowCloseButton = false;
    settings.CloseAction = CloseAction.None;
    //settings.HeaderText = "Change Fees Structure";
    settings.CloseOnEscape = false;
    settings.Modal = false;
    settings.Width = 1000;
    settings.Height = 600;
    //settings.ContentUrl = "~/StudentListFeesStructure/Index?ispoup=1";
    settings.ContentUrl = "";
    settings.PopupHorizontalAlign = PopupHorizontalAlign.WindowCenter;
    settings.PopupVerticalAlign = PopupVerticalAlign.WindowCenter;
    settings.SetHeaderTemplateContent(content =>
    {
        

        ViewContext.Writer.Write("<div class='row'>  <div class='col-sm-10'>");

        ViewContext.Writer.Write("<span> Change Fees Structure</span> ");

        ViewContext.Writer.Write("</div> ");

        ViewContext.Writer.Write("<div class='col-sm-2'>");
        Html.DevExpress().Button(btn =>
        {
            btn.Name = "btnclosefeesstructurechange";
            btn.ControlStyle.CssClass = "form-control";
            btn.Text = "Save & Close";
            btn.ClientSideEvents.Click = "feesTransactionController.CloseFeesStructureChangePopupLoading";

        }).GetHtml();
        ViewContext.Writer.Write("</div> </div>");

    });

    //settings.SetHeaderTemplateContent(() =>
    //{
    //    Html.RenderPartial("PopupCloseFeesStructureChage");
    //    //ViewContext.Writer.Write("<div id='divsmsresponse'  style='color:red'> </div>");
    //    //Html.DevExpress().Button(
    //    // btnsettings =>
    //    // {
    //    //     btnsettings.Name = "btnresetfees";
    //    //     btnsettings.ControlStyle.CssClass = "button btnpaddingrow15px";
    //    //     btnsettings.Text = "Reset Fees Structure";
    //    //     // settings.ClientSideEvents.Click = "feesTransactionController.Onclickreceiptsearchshowpopup";
    //    // }).GetHtml();

    //    //ViewContext.Writer.Write("<div id='divsmsresponse'  style='color:red'> </div>");

    //});


}).GetHtml()
    </div>

</div>


<div class="row" style="margin-right:0">

    @Html.DevExpress().PopupControl(settings =>
    {
    settings.Name = "popupControlsearchreceipt";
    settings.Width = 320;
    //settings.Height = 100;
    settings.AllowResize = true;
    settings.ShowHeader = true;
    settings.AllowDragging = true;
    settings.CloseAction = CloseAction.CloseButton;
    settings.HeaderText = "Search Receipt";
    settings.CloseOnEscape = false;
    settings.Modal = false;
    //settings.AutoUpdatePosition = true;
    settings.PopupHorizontalAlign = PopupHorizontalAlign.WindowCenter;
    settings.PopupVerticalAlign = PopupVerticalAlign.WindowCenter;

        settings.SetContent(() =>
        {
            Html.RenderPartial("FeesReceiptSearchPartialView");
        });

    }).GetHtml()


    <div class="col-sm-12">

        @Html.Partial("FeesTransactionView", Model)

    </div>



</div>

<div class="row" style="margin-right:0">


    <div class="col-sm-12">
        

    </div>

    <div class="col-sm-12">
       

    </div>




</div>



@Html.DevExpress().LoadingPanel(
           settings =>
           {
               settings.Name = "loadingPanelFeestructure";
               settings.Modal = true;
               settings.ContainerElementID = "";
               settings.Styles.LoadingDiv.BackColor = System.Drawing.Color.White;
           }).GetHtml()




















